/*!
 * jQuery UI date range picker widget
 * Copyright (c) 2017 Tamble, Inc.
 * Licensed under MIT (https://github.com/tamble/jquery-ui-daterangepicker/raw/master/LICENSE.txt)
 *
 * Depends:
 *   - jQuery 1.8.3+
 *   - jQuery UI 1.9.0+ (widget factory, position utility, button, menu, datepicker)
 *   - moment.js 2.3.0+
 */
!function(t,e,n){var a=0;function o(e,a,o){var r,i,c;return r=t("<div></div>").addClass(e+"-presets"),i=t("<ul></ul>"),c=t.ui.menu.prototype.options.items===n?{start:'<li><a href="#">',end:"</a></li>"}:{start:"<li><div>",end:"</div></li>"},t.each(a.presetRanges,(function(){t(c.start+this.text+c.end).data("dateStart",this.dateStart).data("dateEnd",this.dateEnd).click(o).appendTo(i)})),r.append(i),i.menu().data("ui-menu").delay=0,{getElement:function(){return r}}}t.widget("comiseo.daterangepicker",{version:"0.6.0-beta.1",options:{presetRanges:[{text:"Today",dateStart:function(){return moment()},dateEnd:function(){return moment()}},{text:"Yesterday",dateStart:function(){return moment().subtract("days",1)},dateEnd:function(){return moment().subtract("days",1)}},{text:"Last 7 Days",dateStart:function(){return moment().subtract("days",6)},dateEnd:function(){return moment()}},{text:"Last Week (Mo-Su)",dateStart:function(){return moment().subtract("days",7).isoWeekday(1)},dateEnd:function(){return moment().subtract("days",7).isoWeekday(7)}},{text:"Month to Date",dateStart:function(){return moment().startOf("month")},dateEnd:function(){return moment()}},{text:"Previous Month",dateStart:function(){return moment().subtract("month",1).startOf("month")},dateEnd:function(){return moment().subtract("month",1).endOf("month")}},{text:"Year to Date",dateStart:function(){return moment().startOf("year")},dateEnd:function(){return moment()}}],initialText:"Select date range...",icon:"ui-icon-triangle-1-s",applyButtonText:"Apply",clearButtonText:"Clear",cancelButtonText:"Cancel",rangeSplitter:" - ",dateFormat:"M d, yy",altFormat:"yy-mm-dd",verticalOffset:0,mirrorOnCollision:!0,autoFitCalendars:!0,applyOnMenuSelect:!0,open:null,close:null,change:null,clear:null,cancel:null,onOpen:null,onClose:null,onChange:null,onClear:null,datepickerOptions:{numberOfMonths:3,maxDate:0}},_create:function(){this._dateRangePicker=function(n,r,i){var c,u,l,s,d,f,p="comiseo-daterangepicker",g=!1,m=!1,h=0,b=1,y=2,v=3,O=["left","right","top","bottom"],k=b,C=null;function x(){l=function(e,n,o){var r,i;function c(){i="drp_autogen"+a++,t('label[for="'+e.attr("id")+'"]').attr("for",i)}function u(){c(),r=t('<button type="button"></button>').addClass(n+"-triggerbutton").attr({title:e.attr("title"),tabindex:e.attr("tabindex"),id:i}).button({icons:{secondary:o.icon},icon:o.icon,iconPosition:"end",label:o.initialText})}function l(){return r.button("option","label")}function s(t){r.button("option","label",t)}function d(){e.val("").change(),s(o.initialText)}function f(){r.button("option",{icons:{secondary:o.icon},icon:o.icon,iconPosition:"end",label:o.initialText})}return u(),{getElement:function(){return r},getLabel:l,setLabel:s,reset:d,enforceOptions:f}}(n,p,i),s=o(p,i,F),d=function(e,n){var a,o={start:null,end:null};function r(){(a=t("<div></div>",{class:e+"-calendar ui-widget-content"})).datepicker(t.extend({},n.datepickerOptions,{beforeShowDay:u,onSelect:c})),l()}function i(){a.datepicker("option",t.extend({},n.datepickerOptions,{beforeShowDay:u,onSelect:c}))}function c(e,a){var r=n.datepickerOptions.dateFormat||t.datepicker._defaults.dateFormat,i=t.datepicker.parseDate(r,e);!o.start||o.end?(o.start=i,o.end=null):i<o.start?(o.end=o.start,o.start=i):o.end=i,n.datepickerOptions.hasOwnProperty("onSelect")&&n.datepickerOptions.onSelect(e,a)}function u(t){let e=[!0,"",""];const{start:a,end:r}=o;a&&+t==+a&&(e[1]+=" range-start"),r&&+t==+r&&(e[1]+=" range-end"),a&&(+t==+a||r&&a<=t&&t<=r)&&(e[1]+=" ui-state-highlight");let i=[!0,"",""];return n.datepickerOptions.hasOwnProperty("beforeShowDay")&&(i=n.datepickerOptions.beforeShowDay(t)),[e[0]&&i[0],(e[1]+" "+i[1]).trim(),i[2]]}function l(){setTimeout((function(){d(),l()}),moment().endOf("day")-moment())}function s(){o.start&&a.datepicker("setDate",o.start)}function d(){a.datepicker("refresh"),a.datepicker("setDate",null)}function f(){o={start:null,end:null},d()}return r(),{getElement:function(){return a},scrollToRangeStart:function(){return s()},getRange:function(){return o},setRange:function(t){o=t,d()},refresh:d,reset:f,enforceOptions:i}}(p,i),S.numberOfMonths=i.datepickerOptions.numberOfMonths,S.numberOfMonths instanceof Array&&(i.autoFitCalendars=!1),f=function(e,n,a){var o,r,i,c;function u(){o=t("<div></div>").addClass(e+"-buttonpanel"),n.applyButtonText&&(r=t('<button type="button" class="ui-priority-primary"></button>').text(n.applyButtonText).button(),o.append(r)),n.clearButtonText&&(i=t('<button type="button" class="ui-priority-secondary"></button>').text(n.clearButtonText).button(),o.append(i)),n.cancelButtonText&&(c=t('<button type="button" class="ui-priority-secondary"></button>').text(n.cancelButtonText).button(),o.append(c)),s()}function l(){r&&r.button("option","label",n.applyButtonText),i&&i.button("option","label",n.clearButtonText),c&&c.button("option","label",n.cancelButtonText)}function s(){a&&(r&&r.click(a.onApply),i&&i.click(a.onClear),c&&c.click(a.onCancel))}return u(),{getElement:function(){return o},enforceOptions:l}}(p,i,{onApply:function(t){Y(t),M(null,t)},onClear:function(t){Y(t),W(t)},onCancel:function(t){r._trigger("cancel",t,{instance:r}),Y(t),P()}}),E(),S(),P(),w()}function E(){c=t("<div></div>",{class:p+" "+p+"-"+O[k]+" ui-widget ui-widget-content ui-corner-all ui-front"}).append(t("<div></div>",{class:p+"-main ui-widget-content"}).append(s.getElement()).append(d.getElement())).append(t('<div class="ui-helper-clearfix"></div>').append(f.getElement())).hide(),n.hide().after(l.getElement()),u=t("<div></div>",{class:"ui-front "+p+"-mask"}).hide(),t("body").append(u).append(c)}function S(){if(i.autoFitCalendars){var n=t(e).width(),a=c.outerWidth(!0),o=d.getElement(),r=o.datepicker("option","numberOfMonths"),u=r;if(a>n){for(;r>1&&c.outerWidth(!0)>n;)o.datepicker("option","numberOfMonths",--r);r!==u&&(S.monthWidth=(a-c.outerWidth(!0))/(u-r))}else for(;r<S.numberOfMonths&&n-c.outerWidth(!0)>=S.monthWidth;)o.datepicker("option","numberOfMonths",++r);L(),m=!1}}function R(){c.remove(),l.getElement().remove(),n.show()}function w(){l.getElement().click(j),l.getElement().keydown(N),u.click((function(t){Y(t),P()})),t(e).resize((function(){g?S():m=!0}))}function T(e){var n=i.dateFormat;return t.datepicker.formatDate(n,e.start)+(+e.end!=+e.start?i.rangeSplitter+t.datepicker.formatDate(n,e.end):"")}function D(e){var n=i.altFormat,a={};return a.start=t.datepicker.formatDate(n,e.start),a.end=t.datepicker.formatDate(n,e.end),JSON.stringify(a)}function _(e){var n=i.altFormat,a=null;if(e)try{a=JSON.parse(e,(function(e,a){return e?t.datepicker.parseDate(n,a):a}))}catch(t){}return a}function P(){var t=B();t?(l.setLabel(T(t)),d.setRange(t)):d.reset()}function M(t,e){var a=t||d.getRange();a.start&&(a.end||(a.end=a.start),t&&d.setRange(a),l.setLabel(T(a)),n.val(D(a)).change(),i.onChange&&i.onChange(),r._trigger("change",e,{instance:r}))}function B(){return _(n.val())}function W(t){l.reset(),d.reset(),i.onClear&&i.onClear(),r._trigger("clear",t,{instance:r})}function F(e){var n=t(this),a=n.data("dateStart")().startOf("day").toDate(),o=n.data("dateEnd")().startOf("day").toDate();return d.setRange({start:a,end:o}),i.applyOnMenuSelect&&(Y(e),M(null,e)),!1}function L(){c.position({my:"left top",at:"left bottom"+(i.verticalOffset<0?i.verticalOffset:"+"+i.verticalOffset),of:l.getElement(),collision:"flipfit flipfit",using:function(t,e){var n,a,o=e.element.left+e.element.width/2,r=e.target.left+e.target.width/2,u=k,f=e.element.top+e.element.height/2,g=e.target.top+e.target.height/2,m=C;(k=o>r?b:h)!==u&&(i.mirrorOnCollision&&(n=k===h?s:d,c.children().first().append(n.getElement())),c.removeClass(p+"-"+O[u]),c.addClass(p+"-"+O[k])),c.css({left:t.left,top:t.top}),(C=f>g?v:y)!==m&&(null!==m&&l.getElement().removeClass(p+"-"+O[m]),l.getElement().addClass(p+"-"+O[C])),a=C===v&&e.element.top-e.target.top!==e.target.height+i.verticalOffset||C===y&&e.target.top-e.element.top!==e.element.height+i.verticalOffset,l.getElement().toggleClass(p+"-vfit",a)}})}function A(t){t.preventDefault(),t.stopPropagation()}function N(e){switch(e.which){case t.ui.keyCode.UP:case t.ui.keyCode.DOWN:return A(e),void J(e);case t.ui.keyCode.ESCAPE:return A(e),Y(e),void P();case t.ui.keyCode.TAB:return void Y(e)}}function J(t){g||(l.getElement().addClass(p+"-active"),u.show(),g=!0,m&&S(),d.scrollToRangeStart(),c.show(),L()),i.onOpen&&i.onOpen(),r._trigger("open",t,{instance:r})}function Y(t){g&&(c.hide(),u.hide(),l.getElement().removeClass(p+"-active"),g=!1),i.onClose&&i.onClose(),r._trigger("close",t,{instance:r})}function j(t){g?(Y(t),P()):J(t)}function z(){return c}function Q(){var t=s;s=o(p,i,F),t.getElement().replaceWith(s.getElement()),d.enforceOptions(),f.enforceOptions(),l.enforceOptions();var e=B();e&&l.setLabel(T(e))}return x(),{toggle:j,destroy:R,open:J,close:Y,setRange:M,getRange:B,clearRange:W,reset:P,enforceOptions:Q,getContainer:z}}(this.element,this,this.options)},_destroy:function(){this._dateRangePicker.destroy()},_setOptions:function(t){this._super(t),this._dateRangePicker.enforceOptions()},open:function(){this._dateRangePicker.open()},close:function(){this._dateRangePicker.close()},setRange:function(t){this._dateRangePicker.setRange(t)},getRange:function(){return this._dateRangePicker.getRange()},clearRange:function(){this._dateRangePicker.clearRange()},widget:function(){return this._dateRangePicker.getContainer()}})}(jQuery,window);